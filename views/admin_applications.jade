extends layout
block bodyScripts
  script(type='text/javascript').
    $(document).ready(function(){
       $('#applicationsGrid').jsGrid({
         width: "100%", pageSize: 10, sorting: true, paging: true, filtering: true, autoload: true,
         controller: {
          loadData: function (filter) {
              var d = $.Deferred();
              var data = !{applications};
              if (isEmptyGridFilter(filter)) {
                d.resolve(data);
                return d.promise();
              }
              data = $.grep(data, function (item) {
                if (applyGridFilter(filter, item))
                   return item;
              });
              d.resolve(data);
              return d.promise();
          }
        },
        fields: [
             { name: "id", type: "text", title: "ID",
               itemTemplate: function(value, item) {
                 return $("<a>").attr("href", "/applications/"+item.id).text(value);
                }
             },
             { name: "name", type: "text", title: "Name" },
             { name: "mainOwner.email", type: "text", title: "Owner", filtering: false,
               itemTemplate: function(value, item) {
                 return $("<a>").attr("href", "/users/"+item.mainOwner.userId).text(value);
                }
             },
             { type: "control", width: "10", editButton: false, deleteButton: false,
               _createFilterSwitchButton: function() {
                return this._createOnOffSwitchButton("filtering", this.searchModeButtonClass, false);
               }
             }
         ]
       });
       $("#applicationsGrid").jsGrid("option", "filtering", false);
    });
block content
    .jumbotron.wicked-admin-title
        .container.wicked-title-container
            h1 All Applications

            p Index of all applications in the API Portal.

    .container.wicked-container
        br
        div#applicationsGrid
        br
